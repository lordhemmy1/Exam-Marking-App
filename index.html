<!DOCTYPE html>    
<html lang="en">    
<head>    
  <meta charset="UTF-8" />    
  <title>Examination Marking App</title>    
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />    
  <link rel="stylesheet" href="styles.css" />    
  <!-- jsPDF for PDF export -->    
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>    
</head>    
<body class="bg-light">    
  <header class="bg-primary text-white text-center py-2 mb-3">Examination Marking App</header>    
  <nav class="mb-3 text-center">    
    <button class="tab-button btn btn-outline-primary active me-1" data-tab="answer">Teacher's Answer Tab</button>    
    <button class="tab-button btn btn-outline-primary me-1" data-tab="db">Students Database</button>    
    <button class="tab-button btn btn-outline-primary me-1" data-tab="mark">Marking Tab</button>    
    <button class="tab-button btn btn-outline-primary" data-tab="score">Score Tab</button>    
  </nav>    
    
  <!-- Teacher's Answer Tab -->    
  <section id="answer" class="tab-content active container">    
    <h3>Objective Answer Form</h3>    
    <div id="objective-answer-container" class="mb-3">    
      <form id="objective-answer-form" class="row g-2"></form>    
      <div id="objective-key-total" class="fw-bold mt-2" style="display:none;"></div>    
      <div class="upload-note text-muted fst-italic mb-2">    
        Expected file upload format: Column A – Question No.; Column B – Correct Answer.    
      </div>    
      <input class="form-control" type="file" id="upload-objective-answer" accept=".xlsx,.csv" />    
    </div>    
    
    <h3>Essay Answer Form</h3>    
    <div id="essay-answer-container" class="mb-3">    
      <form id="essay-answer-form" class="row g-2"></form>    
      <div id="essay-key-total" class="fw-bold mt-2" style="display:none;"></div>    
      <div class="upload-note text-muted fst-italic mb-2">    
        Expected file upload format: Column A – Question No.; Column B – Mark; Column C – Answer.    
      </div>    
      <input class="form-control" type="file" id="upload-essay-answer" accept=".xlsx,.csv" />    
    </div>    
    
    <button type="button" id="save-answers-btn" class="btn btn-primary">Save Answers</button>    
  </section>    
    
  <!-- Students Database Tab -->    
  <section id="db" class="tab-content container">    
    <h3>Students Database</h3>    
    <form id="db-student-form" class="row g-3">    
      <div class="col-md-4">    
        <label class="form-label">Name:</label>    
        <input class="form-control" type="text" id="db-student-name" />    
      </div>    
    
      <div class="col-md-8 d-flex align-items-center">    
        <label class="form-label me-3 mb-0">Level:</label>    
        <div class="form-check me-3">    
          <input class="form-check-input" type="radio" name="level" value="primary" id="lvl-primary" />    
          <label class="form-check-label" for="lvl-primary">Primary</label>    
        </div>    
        <div class="form-check me-3">    
          <input class="form-check-input" type="radio" name="level" value="secondary" id="lvl-secondary" />    
          <label class="form-check-label" for="lvl-secondary">Secondary</label>    
        </div>    
        <div class="form-check">    
          <input class="form-check-input" type="radio" name="level" value="tertiary" id="lvl-tertiary" />    
          <label class="form-check-label" for="lvl-tertiary">Tertiary</label>    
        </div>    
      </div>    
    
      <div class="col-md-4">    
        <label class="form-label">Class:</label>    
        <select class="form-select" id="db-student-class">    
          <option value="">Select Class</option>    
        </select>    
      </div>    
    
      <div class="col-md-4">    
        <label class="form-label">Arm:</label>    
        <input    
          class="form-control"    
          type="text"    
          id="db-student-arm"    
          placeholder="Enter Arm e.g Science, Business…"    
        />    
      </div>    
    
      <fieldset class="col-12 border p-3">    
        <legend class="float-none w-auto px-2">Objective Answers (comma-separated)</legend>    
        <textarea class="form-control" id="db-objective-answer" placeholder="E.g. A,B,C,..."></textarea>    
      </fieldset>    
    
      <fieldset class="col-12 border p-3">    
        <legend class="float-none w-auto px-2">Essay Answers</legend>    
        <div id="db-essay-form"></div>    
      </fieldset>    
    
      <div class="col-12">    
        <button type="button" id="save-student-btn" class="btn btn-success me-2">Add Student</button>    
        <button type="button" id="update-student-btn" class="btn btn-primary" style="display:none;">Update Student</button>    
      </div>    
    </form>    
    
    <h4 class="mt-4">Student Information</h4>    
    <div id="student-db-reference" class="table-responsive"></div>    
    <button type="button" id="clear-students-btn" class="btn btn-danger mt-3">Clear Database</button>    
  </section>    
    
  <!-- Marking Tab -->    
  <section id="mark" class="tab-content container">    
    <h3>Student Information</h3>    
    <div id="student-search-container" class="row g-2 mb-3 align-items-end">    
      <div class="col-md-4">    
        <label class="form-label" for="search-student-input">Search Student</label>    
        <input    
          class="form-control"    
          type="text"    
          id="search-student-input"    
          placeholder="Enter student name"    
        />    
      </div>    
      <div class="col-auto">    
        <button type="button" id="search-student-btn" class="btn btn-primary">Search</button>    
      </div>    
      <div class="col-auto">    
        <button type="button" id="mark-next-btn" class="btn btn-secondary">Mark Next Student</button>    
      </div>    
    </div>    
    
    <form id="student-info-form" class="row g-3 mb-4">    
      <div class="col-md-4"><label class="form-label">Name:</label><input class="form-control" type="text" id="mark-student-name" readonly /></div>    
      <div class="col-md-4"><label class="form-label">Class:</label><input class="form-control" type="text" id="mark-student-class" readonly /></div>    
      <div class="col-md-4"><label class="form-label">Arm:</label><input class="form-control" type="text" id="mark-student-arm" readonly /></div>    
    </form>    
    
    <h3>Student Objective Answers</h3>    
    <button class="btn btn-info mb-2" id="populate-objective-btn">Populate Objective Answers</button>    
    <form id="objective-marking-form" class="row g-2 mb-2"></form>    
    <button class="btn btn-warning mb-2" id="mark-objective-btn">Mark Objective</button>    
    <div id="objective-marking-details" class="fw-bold mb-4"></div>    
    
    <h3>Student Essay Answers</h3>    
    <div id="essay-marking-container" class="table-responsive mb-2"></div>    
    <button class="btn btn-info mb-2" id="sum-essay-btn">Sum Essay Marks</button>    
    <div id="essay-scoring-details" class="fw-bold mb-4"></div>    
    
    <button class="btn btn-success" type="button" id="record-mark-btn">Record Mark</button>    
    <div id="marking-notification" class="mt-2 text-success"></div>    
  </section>    
    
  <!-- Score Tab -->    
  <section id="score" class="tab-content container">    
    <h3>Scores</h3>    
    <div class="table-responsive mb-3">    
      <table id="score-table" class="table table-striped">    
        <thead class="thead-dark">    
          <tr>    
            <th>Name</th>    
            <th>Class</th>    
            <th>Arm</th>    
            <th>Objective</th>    
            <th>Essay</th>    
            <th>Total</th>    
          </tr>    
        </thead>    
        <tbody></tbody>    
      </table>    
    </div>    
    <div class="d-flex gap-2 mb-4">    
      <button onclick="resetScores()" class="btn btn-danger">Reset Scores</button>    
      <button type="button" id="download-score-btn" class="btn btn-secondary">Download Scores</button>    
      <button onclick="resetAllData()" id="reset-all-btn" class="btn btn-outline-danger">Reset All</button>    
    </div>    
  </section>    
    
  <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>    
  <script src="script.js"></script>    
</body>    
</html>
