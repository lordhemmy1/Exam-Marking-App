<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Examination Marking App</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header Section -->
        <header>
            <h1>Examination Marking App</h1>
            <div class="user-info">
                <span>Teacher</span>
            </div>
        </header>

        <!-- Navigation Tabs -->
        <nav>
            <button class="tab-button active" data-tab="answer">Teacher's Answer Tab</button>
            <button class="tab-button" data-tab="db">Students Database</button>
            <button class="tab-button" data-tab="mark">Marking Tab</button>
            <button class="tab-button" data-tab="score">Score Tab</button>
        </nav>

        <!-- Main Content Area -->
        <main>
            <!-- Teacher's Answer Tab -->
            <section id="answer" class="tab-content active">
                <h2>Teacher's Answer Key</h2>
                <p>Upload or manually type your objective answers and essay answers</p>
                
                <div class="section-container">
                    <div class="section-header">
                        <h3>Objective Answer Form</h3>
                        <button id="toggle-objective-btn" class="toggle-btn">No Objective</button>
                    </div>
                    <div id="objective-answer-container">
                        <form id="objective-answer-form" class="two-col-form"></form>
                        <div id="objective-key-total">Total Objective Marks: 0</div>
                        <div class="upload-section">
                            <label class="upload-label">
                                <span>Upload Objective Key</span>
                                <input type="file" id="upload-objective-answer" accept=".xlsx,.csv">
                            </label>
                            <p class="upload-note">Expected file upload format: Column A – Question No.; Column B – Correct Answer.</p>
                        </div>
                    </div>
                </div>
                
                <div class="section-container">
                    <div class="section-header">
                        <h3>Essay Answer Form</h3>
                        <button id="toggle-essay-btn" class="toggle-btn">No Essay</button>
                    </div>
                    <div id="essay-answer-container">
                        <form id="essay-answer-form"></form>
                        <div id="essay-key-total">Total Essay Marks: 0</div>
                        <div class="upload-section">
                            <label class="upload-label">
                                <span>Upload Essay Key</span>
                                <input type="file" id="upload-essay-answer" accept=".xlsx,.csv">
                            </label>
                            <p class="upload-note">Expected file upload format: Column A – Question No.; Column B – Mark; Column C – Answer.</p>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button id="save-answers-btn" class="primary-btn">Save Answers</button>
                    <div id="answer-notification"></div>
                </div>
            </section>

            <!-- Students Database Tab -->
            <section id="db" class="tab-content">
                <h2>Students Database</h2>
                <p>Manage student information and examination answers</p>
                
                <div class="form-container">
                    <h3>Add/Edit Student</h3>
                    <form id="db-student-form">
                        <div class="form-group">
                            <label for="db-student-name">Name:</label>
                            <input type="text" id="db-student-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label>Level:</label>
                            <div class="radio-group">
                                <label><input type="radio" name="level" value="primary"> Primary</label>
                                <label><input type="radio" name="level" value="secondary"> Secondary</label>
                                <label><input type="radio" name="level" value="tertiary"> Tertiary</label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="db-student-class">Class:</label>
                            <select id="db-student-class" required>
                                <option value="">Select Class</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="db-student-arm">Arm:</label>
                            <input type="text" id="db-student-arm" placeholder="e.g. Science, Business">
                        </div>
                        
                        <div class="form-group">
                            <label for="db-objective-answer">Objective Answers (comma-separated):</label>
                            <textarea id="db-objective-answer" placeholder="E.g. A,B,C,..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label>Essay Answers:</label>
                            <div id="db-essay-form"></div>
                            <button type="button" id="add-essay-btn" class="secondary-btn">Add Essay Question</button>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="button" id="save-student-btn" class="primary-btn">Add Student</button>
                            <button type="button" id="update-student-btn" class="secondary-btn">Update Student</button>
                        </div>
                    </form>
                </div>
                
                <div class="student-list-container">
                    <h3>Student Information</h3>
                    <div id="student-db-reference">
                        <div class="student-list-header">
                            <span>Name</span>
                            <span>Class</span>
                            <span>Arm</span>
                            <span>Actions</span>
                        </div>
                        <div class="student-list-content">
                            <p class="empty-message">No students added yet</p>
                        </div>
                    </div>
                    
                    <div class="import-section">
                        <label class="upload-label">
                            <span>Import Students</span>
                            <input type="file" id="upload-students" accept=".xlsx,.csv">
                        </label>
                        <button id="clear-students-btn" class="warning-btn">Clear Database</button>
                    </div>
                </div>
            </section>

            <!-- Marking Tab -->
            <section id="mark" class="tab-content">
                <h2>Marking Tab</h2>
                <p>Evaluate student answers and record scores</p>
                
                <div class="student-info-section">
                    <h3>Student Information</h3>
                    <div id="student-search-container" class="search-container">
                        <input type="text" id="search-student-input" placeholder="Enter student name">
                        <button id="search-student-btn" class="primary-btn">Search</button>
                        <button id="mark-next-btn" class="secondary-btn">Next Student</button>
                    </div>
                    
                    <div class="info-card">
                        <div class="info-row">
                            <label>Name:</label>
                            <span id="mark-student-name">-</span>
                        </div>
                        <div class="info-row">
                            <label>Class:</label>
                            <span id="mark-student-class">-</span>
                        </div>
                        <div class="info-row">
                            <label>Arm:</label>
                            <span id="mark-student-arm">-</span>
                        </div>
                    </div>
                </div>
                
                <div class="marking-section">
                    <div class="objective-section">
                        <div class="section-header">
                            <h3>Objective Answers</h3>
                            <button id="populate-objective-btn" class="secondary-btn">Populate Answers</button>
                        </div>
                        <form id="objective-marking-form" class="marking-form"></form>
                        <button id="mark-objective-btn" class="primary-btn">Mark Objective</button>
                        <div id="objective-marking-details" class="result-card">
                            <div class="result-header">Objective Results</div>
                            <div class="result-content">No results yet</div>
                        </div>
                    </div>
                    
                    <div class="essay-section">
                        <div class="section-header">
                            <h3>Essay Answers</h3>
                        </div>
                        <div id="essay-marking-container" class="marking-form"></div>
                        <button id="sum-essay-btn" class="primary-btn">Sum Essay Marks</button>
                        <div id="essay-scoring-details" class="result-card">
                            <div class="result-header">Essay Results</div>
                            <div class="result-content">No results yet</div>
                        </div>
                    </div>
                </div>
                
                <div class="action-section">
                    <button id="record-mark-btn" class="primary-btn">Record Mark</button>
                    <div id="marking-notification" class="notification">Ready to mark student answers</div>
                </div>
            </section>

            <!-- Score Tab -->
            <section id="score" class="tab-content">
                <h2>Scores</h2>
                <p>View and manage student examination results</p>
                
                <table id="score-table">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Class</th>
                            <th>Arm</th>
                            <th>Objective</th>
                            <th>Essay</th>
                            <th>Total</th>
                            <th>Grade</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td colspan="7" class="empty-table">No scores recorded yet</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="score-controls">
                    <button id="clear-scores-btn" class="warning-btn">Reset Scores</button>
                    <button id="download-score-btn" class="primary-btn">Download Scores</button>
                    <button id="reset-all-btn" class="danger-btn">Reset All Data</button>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer>
            <p>Examination Marking App &copy; 2023</p>
        </footer>
    </div>

    <script>
        // The JavaScript code you provided would go here
        // It's too long to include in this response, but it would be placed here
    </script>
</body>
</html>
